<div *ngIf="user" class="col-md-4">
<form [formGroup]="editUserForm" formGroup="editUserForm" (submit)="editUser()">

  <div *ngIf="message" [ngClass]="messageClass">
    <p>{{message}}</p>
    <br>
    <p> The page will automatically update to apply the changes.</p>
  </div>

  <div class="form-group has-feedback" [ngClass]="{'has-error': (editUserForm.controls.username.errors)
          && (editUserForm.controls.username.dirty)}">
    <input [readonly]="isReadonly" formControlName="username" type="text" class="form-control" placeholder="Username">
    <span class="glyphicon glyphicon-user form-control-feedback"></span>
    <span *ngIf="editUserForm.controls.username.errors?.required && editUserForm.controls.username.dirty"
          class="help-block">This field is required.</span>
  </div>
  <div class="form-group has-feedback" [ngClass]="{'has-error': (editUserForm.controls.email.errors)
          && (editUserForm.controls.email.dirty)}">
    <input [readonly]="isReadonly" formControlName="email" type="email" class="form-control" placeholder="Email">
    <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
    <span *ngIf="editUserForm.controls.email.errors?.required && editUserForm.controls.email.dirty"
          class="help-block">This field is required.</span>
    <span *ngIf="editUserForm.controls.email.errors?.email && editUserForm.controls.email.dirty"
          class="help-block">Please provide a valid email address.</span>
  </div>

  <div *ngIf="!isReadonly" class="form-group has-feedback" [ngClass]="{'has-error': (editUserForm.controls.password.errors)
          && (editUserForm.controls.password.dirty)}">
    <input [readonly]="isReadonly" formControlName="password" type="password" class="form-control" placeholder="New Password">
    <span class="glyphicon glyphicon-log-in form-control-feedback"></span>
    <span class="help-block">This field is required.</span>

  </div>

  <div class="form-group has-feedback">
    <input [readonly]="true" type="text" class="form-control" value="{{user.role | titlecase}}">
    <span class="glyphicon glyphicon-knight form-control-feedback"></span>
  </div>

  <div class="form-group">
    <div class="checkbox">
      <label>
        <input (click)="toggleReadonly()" type="checkbox">
        Edit data
      </label>
    </div>
  </div>

  <div *ngIf="!isReadonly" class="row">
    <div class="col-xs-12">
      <button [disabled]="editUserForm.invalid" type="submit" class="btn btn-primary btn-block btn-flat">Update data</button>
    </div>
  </div>
</form>
</div>
